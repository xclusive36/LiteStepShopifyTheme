{%- comment -%}
Product card snippet with responsive image srcset and sizes.
Usage: include with a `product` variable in scope.
{%- endcomment -%}

<a href="{{ product.url }}" class="product-card__link" aria-label="{{ product.title | escape }}">
  <div class="product-card__media">
    <picture>
      {%- if product.featured_image -%}
        <source
          srcset="{{ product.featured_image | img_url: '800x' }} 800w, {{ product.featured_image | img_url: '400x' }} 400w, {{ product.featured_image | img_url: '200x' }} 200w"
          sizes="(max-width: 600px) 100vw, (max-width: 1200px) 50vw, 33vw">
        <img
          src="{{ product.featured_image | img_url: '400x' }}"
          alt="{{ product.title | escape }}"
          loading="lazy"
          class="product-card__image" />
      {%- else -%}
        <img src="{{ 'placeholder-400x.jpg' | asset_url }}" alt="{{ product.title | escape }}" class="product-card__image" />
      {%- endif -%}
    </picture>
  </div>

  <div class="product-card__meta">
    <h3 class="product-card__title">{{ product.title }}</h3>
    <div class="product-card__price">{{ product.price | money }}</div>
  </div>
</a>
<article class="product-card">
  <a href="{{ product.url }}">
    {% if product.featured_image %}
      {%- assign img_320 = product.featured_image | image_url: width: 320 -%}
      {%- assign img_480 = product.featured_image | image_url: width: 480 -%}
      {%- assign img_800 = product.featured_image | image_url: width: 800 -%}
      <img
        src="{{ img_480 }}"
        srcset="{{ img_320 }} 320w, {{ img_480 }} 480w, {{ img_800 }} 800w"
        sizes="(max-width: 600px) 100vw, 400px"
        alt="{{ product.title | escape }}"
        width="400"
        height="400"
        loading="lazy"
      />
    {% endif %}
    <h3>{{ product.title }}</h3>
    <p class="price">{{ product.price | money }}</p>
  </a>
  <button class="quickview-button" data-handle="{{ product.handle }}" type="button">Quick view</button>
  <button class="add-to-cart-button" data-variant-id="{{ product.variants.first.id }}" type="button">Add</button>
</article>
